<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Road vs Shark Fatalities</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  h1 { margin-bottom: 5px; text-align: center; }
  .bar-container { width: 100%; background: #eee; height: 30px; margin: 10px 0; position: relative; }
  .bar { height: 100%; width: 0%; display: flex; align-items: center; color: white; font-weight: bold; padding-left: 5px; box-sizing: border-box; }
  .car-bar { background: red; }
  .shark-bar { background: red; }
  .time-box { position: absolute; right: 10px; top: 5px; color: black; background: white; padding: 2px 5px; border-radius: 4px; font-size: 12px; }
  #meta { margin-top: 20px; }
  button { margin-left: 10px; }
</style>
</head>
<body>
<h1>Global Fatalities: Road vs Shark Attacks</h1>
<div id="bars">
  <div class="bar-container">
    <div class="bar car-bar" id="carBar">ðŸš™</div>
    <div class="time-box" id="carTimeBox"></div>
  </div>
  <div class="bar-container">
    <div class="bar shark-bar" id="sharkBar">ðŸ¦ˆ</div>
    <div class="time-box" id="sharkTimeBox"></div>
  </div>
</div>
<div id="meta">
  <div id="timeStarted"></div>
  <div id="deathCounts"></div>
  <button onclick="restart()">Restart</button>
</div>
<script>
let carInterval = 26; // seconds
let sharkInterval = 5356800; // 2 months in seconds
let carProgress = 0;
let carDeaths = 0;
let sharkProgress = 0;
let sharkDeaths = 0;
let startTime = new Date();
let startTimeMs = startTime.getTime(); // Store start time in milliseconds
document.getElementById("timeStarted").innerText = "Time started: " + startTime.toISOString().replace("T", " ").split(".")[0];
function updateDeathCounts() {
  document.getElementById("deathCounts").innerText =
    `Deaths since timer started: Cars: ${carDeaths}. Sharks: ${sharkDeaths}`;
}
function addCarBar() {
  let container = document.createElement("div");
  container.className = "bar-container";
  let bar = document.createElement("div");
  bar.className = "bar car-bar";
  bar.textContent = "ðŸš™";
  let timeBox = document.createElement("div");
  timeBox.className = "time-box";
  container.appendChild(bar);
  container.appendChild(timeBox);
  let barsDiv = document.getElementById("bars");
  barsDiv.insertBefore(container, barsDiv.children[barsDiv.children.length - 1]); // insert before sharks bar
  return { bar, timeBox };
}
let carBar = document.getElementById("carBar");
let carTimeBox = document.getElementById("carTimeBox");
let sharkBar = document.getElementById("sharkBar");
let sharkTimeBox = document.getElementById("sharkTimeBox");
function updateTimers() {
  let now = Date.now();
  let elapsedSeconds = (now - startTimeMs) / 1000;
  
  // Cars
  let carTimeLeft = carInterval - (elapsedSeconds % carInterval);
  carTimeBox.innerText = `Time til next death: ${Math.floor(carTimeLeft)}s`;
  if (carTimeLeft <= 1) {
    carProgress += 5;
    carDeaths++;
    updateDeathCounts();
    if (carProgress >= 100) {
      carProgress = 0;
      let newBar = addCarBar();
      carBar = newBar.bar;
      carTimeBox = newBar.timeBox;
    }
    carBar.style.width = carProgress + "%";
  }
  
  // Sharks
  let sharkTimeLeft = sharkInterval - (elapsedSeconds % sharkInterval);
  let sharkMonths = (sharkTimeLeft / (60*60*24*30)).toFixed(2);
  sharkTimeBox.innerText = `Time til next death: ${Math.floor(sharkTimeLeft)}s (${sharkMonths} months)`;
  if (sharkTimeLeft <= 1) {
    sharkProgress = 100;
    sharkDeaths++;
    updateDeathCounts();
    sharkBar.style.width = sharkProgress + "%";
    setTimeout(() => { sharkProgress = 0; sharkBar.style.width = "0%"; }, 1000);
  } else {
    // Keep shark bar at 0% until first death
    sharkBar.style.width = "0%";
  }
}
setInterval(updateTimers, 1000);
updateDeathCounts();
function restart() {
  location.reload();
}
</script>
</body>
</html>
